# -*- coding: utf-8 -*-
# @File    : sort_ips
# @Project : 4U
# @Time    : 2024/8/17 17:46
# once, I want 2 leave my name 2 the history
# sadly, I find that my hair gets pale
"""                     
                                      /             
 __.  , , , _  _   __ ______  _    __/  __ ____  _, 
(_/|_(_(_/_</_/_)_(_)/ / / <_</_  (_/_ (_)/ / <_(_)_
                                                 /| 
                                                |/  
"""
import ipaddress


def sort_and_format_ips(ip_list):
    # Convert IPs to ipaddress objects for easier sorting
    ip_list = sorted(ip_list, key=lambda ip: int(ipaddress.IPv4Address(ip)))

    result = []
    start = ip_list[0]
    last = ip_list[0]

    for ip in ip_list[1:]:
        ip_obj = ipaddress.IPv4Address(ip)
        last_obj = ipaddress.IPv4Address(last)

        if ip_obj == last_obj + 1:
            last = ip
        else:
            if start == last:
                result.append(str(start))
            else:
                # Determine if it is a CIDR block or a range
                cidr_blocks = list(ipaddress.summarize_address_range(
                    ipaddress.IPv4Address(start), ipaddress.IPv4Address(last)))
                if len(cidr_blocks) == 1:
                    result.append(str(cidr_blocks[0]))
                else:
                    result.append(f"{start}-{last}")
            start = ip
            last = ip

    # Handle the last block
    if start == last:
        result.append(str(start))
    else:
        cidr_blocks = list(
            ipaddress.summarize_address_range(ipaddress.IPv4Address(start),
                                              ipaddress.IPv4Address(last)))
        if len(cidr_blocks) == 1:
            result.append(str(cidr_blocks[0]))
        else:
            result.append(f"{start}-{last}")

    return result


if __name__ == '__main__':
    data = ["10.10.23.175", "10.10.23.200", "10.10.22.59", "10.10.23.9",
            "10.10.23.1", "10.10.22.146", "10.10.22.228", "10.10.23.201",
            "10.10.23.64", "10.10.23.219", "10.10.23.16", "10.10.23.103",
            "10.10.22.116", "10.10.22.23", "10.10.22.52", "10.10.23.100",
            "10.10.23.171", "10.10.23.56", "10.10.22.91", "10.10.22.167",
            "10.10.22.149", "10.10.22.239", "10.10.23.115", "10.10.22.14",
            "10.10.22.114", "10.10.22.215", "10.10.22.157", "10.10.23.55",
            "10.10.22.118", "10.10.23.51", "10.10.22.37", "10.10.22.60",
            "10.10.222.115", "10.10.22.103", "10.10.23.24", "10.10.22.80",
            "10.10.22.148", "10.10.22.5", "10.10.22.192", "10.10.22.68",
            "10.10.23.36", "10.10.23.112", "10.10.22.77", "10.10.22.79",
            "10.10.221.107", "10.10.23.130", "10.10.22.49", "10.10.22.193",
            "10.10.23.162", "10.10.222.101", "10.10.22.71", "10.10.22.8",
            "10.10.22.16", "10.10.23.199", "10.10.23.139", "10.10.22.104",
            "10.10.23.215", "10.10.221.121", "10.10.22.27", "10.10.23.50",
            "10.10.23.87", "10.10.22.199", "10.10.22.233", "10.10.22.237",
            "10.10.222.114", "10.10.22.211", "10.10.22.64", "10.10.22.240",
            "10.10.23.227", "10.10.23.22", "10.10.23.90", "10.10.23.203",
            "10.10.23.77", "10.10.23.11", "10.10.23.53", "10.10.23.61",
            "10.10.22.101", "10.10.22.51", "10.10.23.197", "10.10.221.120",
            "10.10.23.225", "10.10.23.143", "10.10.23.70", "10.10.23.73",
            "10.10.23.4", "10.10.23.229", "10.10.22.134", "10.10.22.254",
            "10.10.22.70", "10.10.222.108", "10.10.23.146", "10.10.23.23",
            "10.10.22.179", "10.10.23.235", "10.10.221.108", "10.10.22.76",
            "10.10.23.149", "10.10.23.190", "10.10.222.121", "10.10.22.161",
            "10.10.23.234", "10.10.22.242", "10.10.222.106", "10.10.22.212",
            "10.10.22.73", "10.10.22.63", "10.10.23.129", "10.10.22.24",
            "10.10.23.172", "10.10.23.150", "10.10.23.148", "10.10.23.63",
            "10.10.221.117", "10.10.23.28", "10.10.22.120", "10.10.22.112",
            "10.10.23.25", "10.10.22.209", "10.10.23.231", "10.10.22.218",
            "10.10.23.6", "10.10.23.75", "10.10.23.81", "10.10.221.118",
            "10.10.22.96", "10.10.22.130", "10.10.22.86", "10.10.22.171",
            "10.10.22.220", "10.10.23.122", "10.10.23.85", "10.10.22.72",
            "10.10.22.189", "10.10.22.175", "10.10.23.71", "10.10.23.165",
            "10.10.22.156", "10.10.22.69", "10.10.22.117", "10.10.22.253",
            "10.10.22.234", "10.10.23.208", "10.10.23.109", "10.10.23.26",
            "10.10.22.143", "10.10.23.127", "10.10.22.22", "10.10.23.196",
            "10.10.23.117", "10.10.23.220", "10.10.22.147", "10.10.23.2",
            "10.10.23.17", "10.10.23.74", "10.10.22.238", "10.10.22.151",
            "10.10.22.248", "10.10.23.228", "10.10.222.119", "10.10.22.61",
            "10.10.23.30", "10.10.22.205", "10.10.23.20", "10.10.222.117",
            "10.10.23.60", "10.10.22.65", "10.10.22.110", "10.10.22.15",
            "10.10.23.46", "10.10.23.240", "10.10.222.110", "10.10.22.216",
            "10.10.22.127", "10.10.23.226", "10.10.22.67", "10.10.22.89",
            "10.10.23.217", "10.10.23.192", "10.10.23.182", "10.10.22.40",
            "10.10.22.166", "10.10.222.123", "10.10.23.160", "10.10.23.49",
            "10.10.22.224", "10.10.23.211", "10.10.22.46", "10.10.22.159",
            "10.10.23.214", "10.10.221.122", "10.10.23.95", "10.10.22.191",
            "10.10.22.84", "10.10.23.43", "10.10.22.12", "10.10.22.44",
            "10.10.23.102", "10.10.22.45", "10.10.23.173", "10.10.23.206",
            "10.10.222.122", "10.10.23.111", "10.10.22.30", "10.10.221.119",
            "10.10.22.41", "10.10.22.185", "10.10.22.95", "10.10.23.105",
            "10.10.22.90", "10.10.22.50", "10.10.23.194", "10.10.222.111",
            "10.10.22.2", "10.10.22.108", "10.10.222.113", "10.10.23.52",
            "10.10.221.101", "10.10.23.189", "10.10.222.109", "10.10.22.107",
            "10.10.222.104", "10.10.22.38", "10.10.23.195", "10.10.22.231",
            "10.10.22.42", "10.10.22.75", "10.10.23.99", "10.10.23.154",
            "10.10.22.210", "10.10.22.6", "10.10.22.229", "10.10.22.7",
            "10.10.23.191", "10.10.23.39", "10.10.23.104", "10.10.23.62",
            "10.10.22.58", "10.10.23.221", "10.10.22.48", "10.10.22.129",
            "10.10.23.121", "10.10.22.174", "10.10.23.205", "10.10.22.219",
            "10.10.23.193", "10.10.22.153", "10.10.221.115", "10.10.22.223",
            "10.10.23.144", "10.10.222.118", "10.10.23.40", "10.10.22.93",
            "10.10.222.116", "10.10.22.249", "10.10.23.83", "10.10.22.190",
            "10.10.23.123", "10.10.23.156", "10.10.22.241", "10.10.100.100",
            "10.10.22.208", "10.10.22.217", "10.10.22.184", "10.10.23.218",
            "10.10.23.37", "10.10.23.82", "10.10.23.153", "10.10.23.79",
            "10.10.22.202", "10.10.23.230", "10.10.23.187", "10.10.22.88",
            "10.10.22.196", "10.10.23.132", "10.10.22.62", "10.10.23.58",
            "10.10.22.164", "10.10.23.41", "10.10.22.131", "10.10.22.182",
            "10.10.23.145", "10.10.23.142", "10.10.222.120", "10.10.23.107",
            "10.10.22.173", "10.10.22.139", "10.10.23.72", "10.10.22.10",
            "10.10.22.100", "10.10.22.255", "10.10.22.87", "10.10.23.158",
            "10.10.23.177", "10.10.23.178", "10.10.23.5", "10.10.23.164",
            "10.10.221.110", "10.10.22.94", "10.10.22.97", "10.10.22.207",
            "10.10.23.213", "10.10.22.187", "10.10.222.107", "10.10.23.84",
            "10.10.23.210", "10.10.22.28", "10.10.22.138", "10.10.23.241",
            "10.10.22.170", "10.10.22.250", "10.10.23.152", "10.10.23.59",
            "10.10.22.172", "10.10.22.214", "10.10.23.126", "10.10.23.212",
            "10.10.22.83", "10.10.23.202", "10.10.22.150", "10.10.22.221",
            "10.10.23.0", "10.10.23.57", "10.10.23.7", "10.10.22.43",
            "10.10.23.179", "10.10.22.47", "10.10.22.57", "10.10.23.91",
            "10.10.22.126", "10.10.23.15", "10.10.23.174", "10.10.22.152",
            "10.10.23.27", "10.10.22.227", "10.10.22.34", "10.10.23.44",
            "10.10.22.56", "10.10.23.118", "10.10.23.12", "10.10.23.120",
            "10.10.22.102", "10.10.23.185", "10.10.22.251", "10.10.23.170",
            "10.10.23.69", "10.10.22.200", "10.10.22.243", "10.10.22.81",
            "10.10.23.125", "10.10.23.97", "10.10.22.82", "10.10.23.223",
            "10.10.221.114", "10.10.23.233", "10.10.22.31", "10.10.22.144",
            "10.10.22.78", "10.10.22.66", "10.10.22.158", "10.10.23.93",
            "10.10.221.111", "10.10.22.247", "10.10.22.19", "10.10.22.201",
            "10.10.23.207", "10.10.22.145", "10.10.23.33", "10.10.22.204",
            "10.10.22.178", "10.10.23.42", "10.10.22.74", "10.10.222.100",
            "10.10.23.237", "10.10.22.115", "10.10.23.124", "10.10.23.10",
            "10.10.22.32", "10.10.221.102", "10.10.23.31", "10.10.22.244",
            "10.10.22.225", "10.10.23.67", "10.10.23.32", "10.10.23.101",
            "10.10.23.169", "10.10.22.154", "10.10.22.85", "10.10.23.35",
            "10.10.23.80", "10.10.22.183", "10.10.23.98", "10.10.23.96",
            "10.10.22.106", "10.10.222.112", "10.10.23.209", "10.10.23.216",
            "10.10.23.66", "10.10.23.68", "10.10.22.142", "10.10.22.222",
            "10.10.23.186", "10.10.22.230", "10.10.23.204", "10.10.221.109",
            "10.10.22.195", "10.10.22.113", "10.10.22.53", "10.10.22.232",
            "10.10.23.238", "10.10.23.13", "10.10.22.226", "10.10.221.103",
            "10.10.23.128", "10.10.22.163", "10.10.22.236", "10.10.22.128",
            "10.10.221.112", "10.10.23.134", "10.10.22.169", "10.10.22.176",
            "10.10.23.45", "10.10.22.132", "10.10.22.197", "10.10.23.94",
            "10.10.22.125", "10.10.23.176", "10.10.23.138", "10.10.23.78",
            "10.10.22.186", "10.10.22.33", "10.10.22.181", "10.10.22.213",
            "10.10.22.160", "10.10.22.162", "10.10.23.181", "10.10.23.116",
            "10.10.23.65", "10.10.22.92", "10.10.22.105", "10.10.23.155",
            "10.10.23.3", "10.10.23.19", "10.10.221.113", "10.10.22.29",
            "10.10.23.113", "10.10.23.168", "10.10.23.184", "10.10.22.180",
            "10.10.22.21", "10.10.23.141", "10.10.22.18", "10.10.23.86",
            "10.10.22.203", "10.10.22.168", "10.10.22.198", "10.10.23.29",
            "10.10.22.252"]

    formatted_ips = sort_and_format_ips(data)

    print("Mixed format:", formatted_ips)
